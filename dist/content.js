const t=document.createElement("div");t.id="image-preview";document.body.appendChild(t);let r=300;chrome.storage.sync.get("previewSize",e=>{e.previewSize&&(r=e.previewSize)});chrome.storage.onChanged.addListener((e,n)=>{e.previewSize&&(r=e.previewSize.newValue)});const l=document.getElementsByTagName("img");for(let e=0;e<l.length;e++)l[e].addEventListener("mouseover",n=>{const i=document.createElement("img");i.src=n.target.src,i.onload=()=>{const o=i.naturalWidth/i.naturalHeight;t.style.width=`${r}px`,t.style.height=`${r/o}px`},t.innerHTML="",t.appendChild(i),t.style.display="block"}),l[e].addEventListener("mouseout",()=>{t.style.display="none"}),l[e].addEventListener("mousemove",n=>{let i=n.clientX+15,o=n.clientY+15;const d=t.getBoundingClientRect();i+d.width>window.innerWidth&&(i=n.clientX-d.width-15),o+d.height>window.innerHeight&&(o=n.clientY-d.height-15),t.style.top=`${o}px`,t.style.left=`${i}px`});
